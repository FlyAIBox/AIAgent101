{
  "name": "N8Nï¼šä¸ªäººæ—…æ¸¸è§„åˆ’åŠ©æ‰‹-ä¼˜åŒ–ç‰ˆ",
  "nodes": [
    {
      "parameters": {
        "content": "## ğŸ¯ N8Nä¸ªäººæ—…æ¸¸è§„åˆ’åŠ©æ‰‹ - ä¼˜åŒ–ç‰ˆ\n\n**è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„AIé©±åŠ¨çš„æ—…æ¸¸è§„åˆ’ç³»ç»Ÿï¼Œèƒ½å¤Ÿè‡ªåŠ¨æœç´¢èˆªç­å’Œé…’åº—ï¼Œå¹¶ç”Ÿæˆä¸ªæ€§åŒ–çš„æ¨èé‚®ä»¶ã€‚**\n\n### å·¥ä½œæµæ¦‚è§ˆï¼š\n1. **ğŸ“ ç”¨æˆ·è¾“å…¥** - é€šè¿‡è¡¨å•æ”¶é›†æ—…è¡Œéœ€æ±‚\n2. **âœˆï¸ èˆªç­æœç´¢** - ä½¿ç”¨Google Flights APIæœç´¢èˆªç­\n3. **ğŸ¨ é…’åº—æœç´¢** - å¹¶è¡Œæœç´¢Airbnbã€Booking.comã€Agoda\n4. **ğŸ¤– AIåˆ†æ** - ä½¿ç”¨Gemini AIåˆ†æå¹¶ç”Ÿæˆæ¨è\n5. **ğŸ“§ é‚®ä»¶å‘é€** - å‘é€ä¸ªæ€§åŒ–æ¨èé‚®ä»¶\n\n### ä¼˜åŒ–ç‰¹ç‚¹ï¼š\n- âœ… ä¿®å¤é‚®ä»¶æ ¼å¼é—®é¢˜\n- âœ… ç»Ÿä¸€æ’ç‰ˆå’Œå¯¹é½\n- âœ… å»é™¤å¤šä½™åˆ†éš”ç¬¦\n- âœ… ä¼˜åŒ–HTMLé‚®ä»¶æ¨¡æ¿\n- âœ… ç§»åŠ¨ç«¯å‹å¥½è®¾è®¡",
        "height": 496,
        "width": 446,
        "color": 3
      },
      "id": "5bda7ace-c767-4bbb-b4f9-70d2bf17b55b",
      "name": "å·¥ä½œæµæ¦‚è§ˆ",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1872,
        -432
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "formTitle": "è§„åˆ’ä½ çš„å®Œç¾æ—…ç¨‹",
        "formFields": {
          "values": [
            {
              "fieldLabel": "Departure City",
              "placeholder": "è¯·è¾“å…¥å‡ºå‘åŸå¸‚ï¼ˆä¾‹å¦‚ï¼šåŒ—äº¬ï¼‰"
            },
            {
              "fieldLabel": "Destination City",
              "placeholder": "è¯·è¾“å…¥ç›®çš„åœ°ï¼ˆä¾‹å¦‚ï¼š ä¸œäº¬ï¼‰"
            },
            {
              "fieldLabel": "Email Address",
              "fieldType": "email",
              "placeholder": "è¯·è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€"
            },
            {
              "fieldLabel": "Departure Date",
              "fieldType": "date",
              "requiredField": true
            },
            {
              "fieldLabel": "Return Date",
              "fieldType": "date"
            },
            {
              "fieldLabel": "Number of Adults",
              "fieldType": "number",
              "placeholder": "è¯·è¾“å…¥æˆäººæ•°é‡ï¼ˆ13å²åŠä»¥ä¸Šï¼‰",
              "requiredField": true
            },
            {
              "fieldLabel": "Number of Children",
              "fieldType": "number",
              "placeholder": "è¯·è¾“å…¥å„¿ç«¥æ•°é‡ï¼ˆ2â€“12å²ï¼‰",
              "requiredField": true
            },
            {
              "fieldLabel": "Number of Infants",
              "fieldType": "number",
              "placeholder": "è¯·è¾“å…¥å©´å„¿æ•°é‡ï¼ˆ2å²ä»¥ä¸‹ï¼‰",
              "requiredField": true
            },
            {
              "fieldLabel": "Number of Pets",
              "fieldType": "number",
              "placeholder": "è¯·è¾“å…¥æºå¸¦å® ç‰©æ•°é‡",
              "requiredField": true
            },
            {
              "fieldLabel": "Number of Rooms",
              "fieldType": "number",
              "placeholder": "è¯·è¾“å…¥æ‰€éœ€æˆ¿é—´æ•°é‡"
            },
            {
              "fieldLabel": "Travel Preferences",
              "fieldType": "textarea",
              "placeholder": "è¯·æè¿°æ­¤æ¬¡è¡Œç¨‹åå¥½ï¼ˆå¦‚ï¼šåå¥½çš„ä½å®¿ç±»å‹ã€æ´»åŠ¨æˆ–ç‰¹æ®Šéœ€æ±‚ï¼‰"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.2,
      "position": [
        -1696,
        496
      ],
      "id": "ed2e98fe-d40c-45f9-9a39-bc928abf4747",
      "name": "On form submission",
      "webhookId": "e07b905d-832e-474a-804e-ea65285712be"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.0-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.0-flash"
        },
        "messages": {
          "values": [
            {
              "content": "=Below is data from form submission\n{{$json.toJsonString()}}"
            },
            {
              "content": "You are given a travel form submission in JSON format from the n8n Form Trigger node.\nYour task is to transform this input into two JSON objects:\n\n- Google Flights SERP API (n8n verified node)\n- A Home Stay (Airbnb, Booking.com)"
            },
            {
              "content": "=Input Fields from Form Submission Node\n- \"Departure City\" â†’ Origin city/airport (string)\n- \"Destination City\" â†’ Destination city/airport (string)\n- \"Departure Date\" â†’ Departure date (date, required)\n- \"Return Date\" â†’ Return date (date, optional)\n- \"Number of Adults\" â†’ Number of adults (integer, required)\n- \"Number of Children\" â†’ Number of children aged 13+ (integer, required)\n- \"Number of Infants\" â†’ Number of children aged 2â€“12 (integer, required)\n- \"Number of Pets\" â†’ Number of pets (integer, required â€” use only in Airbnb)\n- \"Travel Preferences\" â†’ Free text description (string, optional, not used in output)"
            },
            {
              "content": "=Transformation Rules\n\nGoogle Flights Object :\n- \"departure_id\" = Convert {{ $json[\"Departure City\"] }} city/airport â†’ IATA code of main international airport.\n- \"arrival_id\" = Convert {{ $json[\"Destination City\"] }} city/airport â†’ IATA code of main international airport.\n- \"outbound_date\" = {{ $json[\"Departure Date\"] }} (YYYY-MM-DD).\n- \"return_date\" = {{ $json[\"Return Date\"] }} (YYYY-MM-DD).\n- \"type\" values:\n  - 1 = roundtrip (if Return Date exists).\n  - 2 = one-way (if only Departure Date exists).\n  - 3 = multi-city (if multiple destinations are given).\n- \"travel_class\": always 1 (economy) unless stated otherwise.\n- \"currency\" = \"USD\".\n- \"adults\" = {{ $json[\"Number of Adults\"] }}.\n- \"children\" = {{ $json[\"Number of Children\"] }}.\n- \"infants_in_seat\" = {{ $json[\"Number of Infants\"] }}.\n- \"hl\" = \"en\".\n\n\nHome Stay Object :\n- \"location\" = {{ $json[\"Destination City\"] }}.\n- \"check_in\" = {{ $json[\"Departure Date\"] }} in full ISO format (YYYY-MM-DDT00:00:00.000Z).\n- \"check_out\" = {{ $json[\"Return Date\"] }} in full ISO format (YYYY-MM-DDT00:00:00.000Z).\n- \"num_of_adults\" = {{ $json[\"Number of Adults\"] }}.\n- \"num_of_children\" = {{ $json[\"Number of Children\"] }}.\n- \"num_of_infants\" = {{ $json[\"Number of Infants\"] }}.\n- \"num_of_pets\" = {{ $json[\"Number of Pets\"] }}.\n- \"num_of_rooms\" = {{ $json[\"Number of Rooms\"] }}.\n- \"country\" = \"US\"."
            },
            {
              "content": "Output Format\n\nReturn the final answer as only JSON in the following structure (no explanation, no extra text):\n{\n  \"google_flights\": {\n    \"departure_id\": \"string(IATA code departure_id)\",\n    \"arrival_id\": \"string(IATA code arrival_id)\",\n    \"outbound_date\": \"string(outbound_date)\",\n    \"return_date\": \"string(return_date)\",\n    \"type\": number(type),\n    \"currency\": \"string(currency)\",\n    \"adults\": number(adults),\n    \"children\": number(children),\n    \"infants_in_seat\": number(infants_in_seat),\n    \"travel_class\": number(travel_class),\n    \"hl\": \"string(hl)\"\n  },\n  \"homestay_preferences\": {\n    \"location\": \"string(location)\",\n    \"check_in\": \"string(check_in)\",\n    \"check_out\": \"string(check_out)\",\n    \"num_of_adults\": number(num_of_adults),\n    \"num_of_children\": number(num_of_children),\n    \"num_of_infants\": number(num_of_infants),\n    \"num_of_pets\": number(num_of_pets),\n    \"num_of_rooms\": number(num_of_rooms),\n    \"country\": \"string(country)\"\n  }\n}"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -1392,
        496
      ],
      "id": "1b4973ef-d399-4074-995f-406ead40eeb8",
      "name": "Extract form submission to JSON",
      "alwaysOutputData": true,
      "credentials": {
        "googlePalmApi": {
          "id": "12KiryYsMrX43jr6",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "return JSON.parse($input.first().json.content.parts[0].text)"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1040,
        496
      ],
      "id": "65050b9a-4371-4cbd-b91a-5bf70c826272",
      "name": "Parse JSON"
    },
    {
      "parameters": {
        "operation": "google_flights",
        "departure_id": "={{ $json.google_flights.departure_id }}",
        "arrival_id": "={{ $json.google_flights.arrival_id }}",
        "outbound_date": "={{ $json.google_flights.outbound_date }}",
        "return_date": "={{ $json.google_flights.return_date }}",
        "type": "={{ $json.google_flights.type }}",
        "additionalFields": {
          "travel_class": "={{ $json.google_flights.travel_class }}",
          "adults": "={{ $json.google_flights.adults }}",
          "children": "={{ $json.google_flights.children }}",
          "infants_in_seat": "={{ $json.google_flights.infants_in_seat }}"
        },
        "requestOptions": {}
      },
      "type": "n8n-nodes-serpapi.serpApi",
      "typeVersion": 1,
      "position": [
        -368,
        -160
      ],
      "id": "683b0ea4-c099-4445-aa36-0e0c7f3b28d1",
      "name": "Google_flights search",
      "credentials": {
        "serpApi": {
          "id": "wCNryTzqLxK5N8t8",
          "name": "SerpApi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.0-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.0-flash"
        },
        "messages": {
          "values": [
            {
              "content": "=ä½ æ˜¯ä¸€åä¸“ä¸šæ—…è¡Œé¡¾é—® AIã€‚è¯·åŸºäºæä¾›çš„é…’åº—æ•°æ®ä¸ç”¨æˆ·åå¥½ï¼Œç”Ÿæˆ TOP 1 é…’åº—æ¨èï¼Œä»¥ HTML é‚®ä»¶æ ¼å¼å‘ˆç°ã€‚"
            },
            {
              "content": "=æ—…å®¢åå¥½ï¼š\nå‡ºå‘åœ°ï¼š{{ $('On form submission').first().json[\"Departure City\"] }}\nç›®çš„åœ°ï¼š{{ $('On form submission').first().json[\"Destination City\"] }}\nå‡ºå‘æ—¥æœŸï¼š{{ $('On form submission').first().json[\"Departure Date\"] }}\nè¿”ç¨‹æ—¥æœŸï¼š{{ $('On form submission').first().json[\"Return Date\"] }}\næˆäººï¼š{{ $('On form submission').first().json[\"Number of Adults\"] }}\nå„¿ç«¥ï¼š{{ $('On form submission').first().json[\"Number of Children\"] }}\nå©´å„¿ï¼š{{ $('On form submission').first().json[\"Number of Infants\"] }}\nå® ç‰©ï¼š{{ $('On form submission').first().json[\"Number of Pets\"] }}\nå‡ºè¡Œæè¿°ï¼š{{ $('On form submission').first().json[\"Travel Preferences\"] }}\n"
            },
            {
              "content": "=é…’åº—æ¸…å•ï¼š\n{{ $json.toJsonString() }}\n\n*æç¤ºï¼šé…’åº—æ•°æ®å¯èƒ½æ¥è‡ªå¤šä¸ªå¹³å°ï¼ŒåŒ…æ‹¬ Airbnbã€Booking.com å’Œ Agoda*"
            },
            {
              "content": "## ä»»åŠ¡ï¼š\n1. åˆ†æä¸åŒ¹é…ï¼šåŸºäºä»¥ä¸‹ç»´åº¦ä¸ºæ¯å®¶é…’åº—è¯„åˆ†ï¼š\n   - é¢„ç®—åŒ¹é…åº¦ï¼ˆæ˜¯å¦åœ¨ä»·æ ¼èŒƒå›´å†…ï¼‰\n   - ä½ç½®åŒ¹é…åº¦\n   - è®¾æ–½åå¥½åŒ¹é…åº¦\n   - æ—¥æœŸå¯ç”¨æ€§\n   - ç‰¹æ®Šéœ€æ±‚åŒ¹é…åº¦\n\n2. é€‰æ‹©æœ€ä¼˜ï¼šæŒ‘é€‰æœ€ç¬¦åˆéœ€æ±‚çš„ä¸€å®¶é…’åº—ä½œä¸ºæ¨è\n\n3. ç”Ÿæˆ HTML é‚®ä»¶ï¼šåˆ›å»ºå®Œæ•´çš„ HTML é‚®ä»¶å†…å®¹ï¼ŒåŒ…æ‹¬ï¼š"
            },
            {
              "content": "### é‚®ä»¶ç»“æ„è¦æ±‚ï¼š\n\n**é‡è¦ï¼šç›´æ¥è¾“å‡ºå®Œæ•´çš„HTMLé‚®ä»¶ï¼Œä¸è¦åŒ…å«ä»»ä½•Markdownä»£ç å—ã€åˆ†éš”ç¬¦æˆ–é¢å¤–æ–‡æœ¬ï¼**\n\né‚®ä»¶å¿…é¡»åŒ…å«ä»¥ä¸‹ç»“æ„ï¼š\n\n1. **HTMLæ–‡æ¡£ç»“æ„**ï¼š\n```html\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <title>é…’åº—æ¨è</title>\n</head>\n<body style=\"font-family:Arial,sans-serif;line-height:1.6;color:#333;max-width:600px;margin:0 auto;padding:20px;background-color:#f8f9fa;\">\n  [é‚®ä»¶å†…å®¹]\n</body>\n</html>\n```\n\n2. **é‚®ä»¶å¤´éƒ¨**ï¼š\n- æ ‡é¢˜ï¼š\"ä¸º [ç›®çš„åœ°] ç²¾é€‰çš„å®Œç¾é…’åº—â€”â€”æœ€ä½³åŒ¹é…ï¼\"\n- é—®å€™ï¼š\"äº²çˆ±çš„æ—…å®¢ï¼Œ\"\n- è¡Œç¨‹ä»‹ç»ï¼šåŒ…å«å‡ºå‘åœ°ã€ç›®çš„åœ°ã€æ—¥æœŸã€äººæ•°ç­‰ä¿¡æ¯\n\n3. **æ¨èé…’åº—å¡ç‰‡**ï¼š\n```html\n<div style=\"border:2px solid #2c5aa0;margin:20px 0;padding:25px;border-radius:12px;max-width:580px;background:linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);box-shadow:0 4px 6px rgba(0,0,0,0.1);\">\n  <div style=\"text-align:center;margin-bottom:20px;\">\n    <h2 style=\"color:#2c5aa0;margin:0 0 5px 0;font-size:24px;font-weight:bold;\">ğŸ† æˆ‘ä»¬çš„é¦–é€‰æ¨è</h2>\n    <h3 style=\"color:#2c5aa0;margin:0 0 10px 0;font-size:20px;font-weight:normal;\">[é…’åº—åç§°]</h3>\n  </div>\n  <p style=\"color:#888;font-size:12px;margin:0 0 15px 0;text-align:center;\">â­ æ¥æºäº [å¹³å°åç§°] â€¢ æœ€ç¬¦åˆæ‚¨éœ€æ±‚</p>\n  <div style=\"background:#f8f9fa;padding:15px;border-radius:8px;margin:10px 0;\">\n    <p style=\"color:#666;margin:8px 0;font-size:14px;\"><strong>ğŸ“ ä½ç½®ï¼š</strong> [å…·ä½“ä½ç½®]</p>\n    <p style=\"color:#666;margin:8px 0;font-size:14px;\"><strong>ğŸ’° ä»·æ ¼ï¼š</strong> $[æ¯æ™šä»·æ ¼]/æ™š | æ€»è®¡ï¼š$[æ€»ä»·]</p>\n    <p style=\"color:#666;margin:8px 0;font-size:14px;\"><strong>â­ è¯„åˆ†ï¼š</strong> [è¯„åˆ†] ([åˆ†æ•°]/10)</p>\n    <p style=\"color:#666;margin:8px 0;font-size:14px;\"><strong>âœ¨ è®¾æ–½ï¼š</strong> [ä¸»è¦è®¾æ–½]</p>\n  </div>\n  <p style=\"margin:15px 0;font-size:16px;line-height:1.6;color:#333;\">[è¯¦ç»†æ¨èç†ç”±å’ŒåŒ¹é…è¯´æ˜]</p>\n  <div style=\"text-align:center;margin:20px 0;\">\n    <a href=\"[é¢„è®¢é“¾æ¥]\" style=\"background:#2c5aa0;color:white;padding:15px 30px;text-decoration:none;border-radius:8px;display:inline-block;font-size:16px;font-weight:bold;box-shadow:0 2px 4px rgba(0,0,0,0.2);\">ğŸ”— åœ¨ [å¹³å°åç§°] ä¸Šç«‹å³é¢„è®¢</a>\n  </div>\n</div>\n```\n\n4. **é‚®ä»¶é¡µè„š**ï¼š\n- ä¸“ä¸šç»“æŸè¯­\n- è”ç³»ä¿¡æ¯\n- \"å¦‚æœ‰ç–‘é—®ï¼Œç›´æ¥å›å¤æœ¬é‚®ä»¶\"\n\n**è¾“å‡ºè¦æ±‚ï¼š**\n- ç›´æ¥è¾“å‡ºå®Œæ•´HTMLï¼Œä¸è¦ä»»ä½•```html```æ ‡è®°\n- ä¸è¦åŒ…å«---åˆ†éš”ç¬¦\n- ç¡®ä¿æ‰€æœ‰å†…å®¹å±…ä¸­å¯¹é½ï¼ˆé™¤äº†å¡ç‰‡å†…çš„è¯¦ç»†ä¿¡æ¯ï¼‰\n- ä½¿ç”¨ç»Ÿä¸€çš„å­—ä½“å’Œé¢œè‰²æ–¹æ¡ˆ"
            },
            {
              "content": "æ ·å¼è§„èŒƒï¼š\n\n**æ•´ä½“å¸ƒå±€ï¼š**\n- æœ€å¤§å®½åº¦ï¼š600px\n- å±…ä¸­å¯¹é½ï¼šmargin: 0 auto\n- å†…è¾¹è·ï¼š20px\n- èƒŒæ™¯è‰²ï¼š#f8f9fa\n\n**å­—ä½“è§„èŒƒï¼š**\n- ä¸»å­—ä½“ï¼šArial, sans-serif\n- æ ‡é¢˜ï¼š24px, 20px\n- æ­£æ–‡ï¼š16px, 14px\n- å°å­—ï¼š12px\n- è¡Œé«˜ï¼š1.6\n\n**é¢œè‰²æ–¹æ¡ˆï¼š**\n- ä¸»è‰²è°ƒï¼š#2c5aa0ï¼ˆè“è‰²ï¼‰\n- æ–‡å­—ï¼š#333ï¼ˆæ·±ç°ï¼‰\n- æ¬¡è¦æ–‡å­—ï¼š#666ï¼ˆä¸­ç°ï¼‰\n- æç¤ºæ–‡å­—ï¼š#888ï¼ˆæµ…ç°ï¼‰\n\n**å¯¹é½è¦æ±‚ï¼š**\n- é‚®ä»¶æ ‡é¢˜ï¼šå±…ä¸­\n- é—®å€™è¯­ï¼šå±…ä¸­\n- è¡Œç¨‹ä¿¡æ¯ï¼šå±…ä¸­\n- é…’åº—å¡ç‰‡ï¼šå±…ä¸­\n- å¡ç‰‡å†…è¯¦ç»†ä¿¡æ¯ï¼šå·¦å¯¹é½\n- é¢„è®¢æŒ‰é’®ï¼šå±…ä¸­\n- é¡µè„šï¼šå±…ä¸­\n\n**é‡è¦æé†’ï¼š**\n- ä¸è¦ä½¿ç”¨Markdownæ ¼å¼\n- ä¸è¦åŒ…å«ä»£ç å—æ ‡è®°\n- ä¸è¦æ·»åŠ åˆ†éš”ç¬¦\n- ç¡®ä¿HTMLæ ¼å¼æ­£ç¡®\n- æ‰€æœ‰æ ·å¼ä½¿ç”¨å†…è”CSS"
            },
            {
              "content": "è¾“å‡ºæ ¼å¼è¦æ±‚ï¼š\n\n**ä¸¥æ ¼éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š**\n\n1. **ç›´æ¥è¾“å‡ºHTML**ï¼šä¸è¦åŒ…å«```html```ã€```ã€---ç­‰ä»»ä½•æ ‡è®°\n2. **å®Œæ•´HTMLæ–‡æ¡£**ï¼šä»<!DOCTYPE html>å¼€å§‹ï¼Œåˆ°</html>ç»“æŸ\n3. **å†…å®¹å±…ä¸­**ï¼šé™¤äº†å¡ç‰‡å†…çš„è¯¦ç»†ä¿¡æ¯å¤–ï¼Œæ‰€æœ‰å†…å®¹éƒ½è¦å±…ä¸­å¯¹é½\n4. **ç»Ÿä¸€æ’ç‰ˆ**ï¼šä½¿ç”¨ä¸€è‡´çš„å­—ä½“å¤§å°ã€é¢œè‰²å’Œé—´è·\n5. **ç§»åŠ¨ç«¯å‹å¥½**ï¼šç¡®ä¿åœ¨æ‰‹æœºä¸Šä¹Ÿèƒ½æ­£å¸¸æ˜¾ç¤º\n\n**ç¦æ­¢åŒ…å«ï¼š**\n- Markdownä»£ç å—æ ‡è®°\n- åˆ†éš”ç¬¦ï¼ˆ---ï¼‰\n- å¤šä½™çš„HTMLæ ‡è®°\n- ä¸è§„èŒƒçš„ç¼©è¿›\n\n**å¿…é¡»åŒ…å«ï¼š**\n- å®Œæ•´çš„HTMLæ–‡æ¡£ç»“æ„\n- ä¸“ä¸šçš„é‚®ä»¶æ ·å¼\n- å±…ä¸­å¯¹é½çš„å¸ƒå±€\n- æ¸…æ™°çš„é…’åº—æ¨èä¿¡æ¯\n- å¯ç‚¹å‡»çš„é¢„è®¢é“¾æ¥\n\n**ç¤ºä¾‹è¾“å‡ºæ ¼å¼ï¼š**\nç›´æ¥ä»¥<!DOCTYPE html>å¼€å¤´ï¼Œä»¥</html>ç»“å°¾ï¼Œä¸­é—´åŒ…å«å®Œæ•´çš„é‚®ä»¶å†…å®¹ï¼Œä¸è¦ä»»ä½•é¢å¤–æ ‡è®°ã€‚"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        2304,
        176
      ],
      "id": "86e5f53d-aeaf-4c9c-ab48-14fb05aefeac",
      "name": "Extract from scrape to email ready to send",
      "retryOnFail": true,
      "credentials": {
        "googlePalmApi": {
          "id": "12KiryYsMrX43jr6",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.0-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.0-flash"
        },
        "messages": {
          "values": [
            {
              "content": "=ä½ æ˜¯ä¸€åä¸“ä¸šæ—…è¡Œé¡¾é—® AIã€‚è¯·åŸºäºæä¾›çš„èˆªç­æ•°æ®ä¸ç”¨æˆ·åå¥½ï¼Œç”Ÿæˆ 1 æ¡æœ€ä½³èˆªç­æ¨èï¼ˆHTML é‚®ä»¶æ ¼å¼ï¼‰ã€‚"
            },
            {
              "content": "=## è¾“å…¥æ•°æ®ï¼š\nå¯é€‰èˆªç­ï¼š{{$json}}\nç”¨æˆ·åå¥½ï¼š\nå‡ºå‘åœ°ï¼š{{ $('On form submission').first().json[\"Departure City\"] }}\nç›®çš„åœ°ï¼š{{ $('On form submission').first().json[\"Destination City\"] }}\nå‡ºå‘æ—¥æœŸï¼š{{ $('On form submission').first().json[\"Departure Date\"] }}\nè¿”ç¨‹æ—¥æœŸï¼š{{ $('On form submission').first().json[\"Return Date\"] }}\næˆäººï¼š{{ $('On form submission').first().json[\"Number of Adults\"] }}\nå„¿ç«¥ï¼š{{ $('On form submission').first().json['Number of Children'] }}\nå©´å„¿ï¼š{{ $('On form submission').first().json['Number of Infants'] }}\nå® ç‰©ï¼š{{ $('On form submission').first().json['Number of Pets'] }}\nå‡ºè¡Œæè¿°ï¼š{{ $('On form submission').first().json[\"Travel Preferences\"] }}\nGoogle Flights é“¾æ¥ï¼š\n{{ $json.google_flights_url }}\n\n*æç¤ºï¼šèˆªç­æ•°æ®æ¥è‡ª Google Flights*"
            },
            {
              "content": "## ä»»åŠ¡ï¼š\n1. åˆ†æä¸åŒ¹é…ï¼šåŸºäºä»¥ä¸‹ç»´åº¦ä¸ºæ¯ä¸ªèˆªç­è¯„åˆ†ï¼š\n   - ä»·æ ¼åŒ¹é…åº¦ï¼ˆæ˜¯å¦åœ¨é¢„ç®—èŒƒå›´å†…ï¼‰\n   - æ—¶é—´åå¥½ï¼ˆèµ·é™æ—¶é—´ï¼‰\n   - æ€»æ—¶é•¿ä¸ç»åœæ¬¡æ•°\n   - èˆªå¸åå¥½\n   - èˆ±ä½è¦æ±‚\n   - ä¸­è½¬ä¾¿åˆ©æ€§\n\n2. é€‰æ‹©æœ€ä½³ï¼šæŒ‘é€‰æœ€ç¬¦åˆéœ€æ±‚çš„ä¸€æ¡èˆªç­æ–¹æ¡ˆ\n\n3. ç”Ÿæˆ HTML é‚®ä»¶ï¼šåˆ›å»ºå®Œæ•´çš„ HTML é‚®ä»¶å†…å®¹ï¼ŒåŒ…æ‹¬ï¼š"
            },
            {
              "content": "### èˆªç­æ¨èé‚®ä»¶ç»“æ„è¦æ±‚ï¼š\n\n**é‡è¦ï¼šç›´æ¥è¾“å‡ºå®Œæ•´çš„HTMLé‚®ä»¶ï¼Œä¸è¦åŒ…å«ä»»ä½•Markdownä»£ç å—ã€åˆ†éš”ç¬¦æˆ–é¢å¤–æ–‡æœ¬ï¼**\n\né‚®ä»¶å¿…é¡»åŒ…å«ä»¥ä¸‹ç»“æ„ï¼š\n\n1. **HTMLæ–‡æ¡£ç»“æ„**ï¼š\n```html\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <title>èˆªç­æ¨è</title>\n</head>\n<body style=\"font-family:Arial,sans-serif;line-height:1.6;color:#333;max-width:600px;margin:0 auto;padding:20px;background-color:#f8f9fa;\">\n  [é‚®ä»¶å†…å®¹]\n</body>\n</html>\n```\n\n2. **é‚®ä»¶å¤´éƒ¨**ï¼š\n- æ ‡é¢˜ï¼š\"å‰å¾€ [ç›®çš„åœ°] çš„æœ€ä½³èˆªç­â€”â€”ä¸ºæ‚¨ç²¾é€‰ï¼\"\n- é—®å€™ï¼š\"äº²çˆ±çš„æ—…å®¢ï¼Œ\"\n- è¡Œç¨‹ä»‹ç»ï¼šåŒ…å«å‡ºå‘åœ°ã€ç›®çš„åœ°ã€æ—¥æœŸã€äººæ•°ç­‰ä¿¡æ¯\n\n3. **æ¨èèˆªç­å¡ç‰‡**ï¼š\n```html\n<div style=\"border:2px solid #1e88e5;margin:20px 0;padding:25px;border-radius:12px;max-width:580px;background:linear-gradient(135deg, #f0f8ff 0%, #ffffff 100%);box-shadow:0 4px 6px rgba(0,0,0,0.1);\">\n  <div style=\"text-align:center;margin-bottom:20px;\">\n    <h2 style=\"color:#1e88e5;margin:0 0 5px 0;font-size:24px;font-weight:bold;\">âœˆï¸ æˆ‘ä»¬çš„èˆªç­é¦–é€‰æ¨è</h2>\n    <h3 style=\"color:#1e88e5;margin:0 0 10px 0;font-size:18px;font-weight:normal;\">[å‡ºå‘åŸå¸‚] â†’ [åˆ°è¾¾åŸå¸‚]</h3>\n  </div>\n  \n  <!-- å»ç¨‹èˆªç­ -->\n  <div style=\"background:#f8f9fa;padding:15px;border-radius:8px;margin:15px 0;\">\n    <h4 style=\"color:#1e88e5;margin:0 0 10px 0;font-size:16px;\">ğŸ›« å»ç¨‹ - [å‡ºå‘æ—¥æœŸ]</h4>\n    <p style=\"margin:5px 0;font-size:14px;\"><strong>èˆªå¸ï¼š</strong> [èˆªå¸åç§°] â€¢ èˆªç­ [èˆªç­å·]</p>\n    <p style=\"margin:5px 0;font-size:14px;\"><strong>èµ·é£ï¼š</strong> [èµ·é£æ—¶é—´] äº [å‡ºå‘æœºåœº]ï¼ˆ[æœºåœºä»£ç ]ï¼‰</p>\n    <p style=\"margin:5px 0;font-size:14px;\"><strong>åˆ°è¾¾ï¼š</strong> [åˆ°è¾¾æ—¶é—´] äº [åˆ°è¾¾æœºåœº]ï¼ˆ[æœºåœºä»£ç ]ï¼‰</p>\n    <p style=\"margin:5px 0;font-size:14px;\"><strong>æ—¶é•¿ï¼š</strong> [é£è¡Œæ—¶é•¿]</p>\n    <p style=\"margin:5px 0;font-size:14px;\"><strong>ç»åœï¼š</strong> [ç»åœä¿¡æ¯]</p>\n  </div>\n  \n  <!-- è¿”ç¨‹èˆªç­ï¼ˆè‹¥ä¸ºå¾€è¿”ï¼‰ -->\n  <div style=\"background:#f8f9fa;padding:15px;border-radius:8px;margin:15px 0;\">\n    <h4 style=\"color:#1e88e5;margin:0 0 10px 0;font-size:16px;\">ğŸ›¬ è¿”ç¨‹ - [è¿”ç¨‹æ—¥æœŸ]</h4>\n    <p style=\"margin:5px 0;font-size:14px;\"><strong>èˆªå¸ï¼š</strong> [è¿”ç¨‹èˆªå¸] â€¢ èˆªç­ [è¿”ç¨‹èˆªç­å·]</p>\n    <p style=\"margin:5px 0;font-size:14px;\"><strong>èµ·é£ï¼š</strong> [è¿”ç¨‹èµ·é£æ—¶é—´] äº [è¿”ç¨‹å‡ºå‘æœºåœº]ï¼ˆ[æœºåœºä»£ç ]ï¼‰</p>\n    <p style=\"margin:5px 0;font-size:14px;\"><strong>åˆ°è¾¾ï¼š</strong> [è¿”ç¨‹åˆ°è¾¾æ—¶é—´] äº [è¿”ç¨‹åˆ°è¾¾æœºåœº]ï¼ˆ[æœºåœºä»£ç ]ï¼‰</p>\n    <p style=\"margin:5px 0;font-size:14px;\"><strong>æ—¶é•¿ï¼š</strong> [è¿”ç¨‹æ—¶é•¿]</p>\n    <p style=\"margin:5px 0;font-size:14px;\"><strong>ç»åœï¼š</strong> [è¿”ç¨‹ç»åœä¿¡æ¯]</p>\n  </div>\n  \n  <div style=\"text-align:center;margin:20px 0;padding:15px;background:#fff3cd;border-radius:8px;\">\n    <p style=\"margin:0 0 10px 0;font-size:18px;font-weight:bold;\"><strong>ğŸ’° æ€»ä»·ï¼š$[æ€»ä»·]</strong></p>\n    <p style=\"margin:0;color:#666;font-size:14px;\">åŒ…å« [æˆäººæ•°é‡] åæˆäºº + [å„¿ç«¥æ•°é‡] åå„¿ç«¥</p>\n  </div>\n  \n  <p style=\"margin:15px 0;font-size:16px;line-height:1.6;color:#333;\">[è¯¦ç»†è¯´æ˜ä¸ºä½•è¯¥èˆªç­ä¸ºæœ€ä½³é€‰æ‹©]</p>\n  \n  <div style=\"text-align:center;margin:20px 0;\">\n    <a href=\"[GOOGLE_FLIGHTS_URL]\" style=\"background:#1e88e5;color:white;padding:15px 30px;text-decoration:none;border-radius:8px;display:inline-block;font-size:16px;font-weight:bold;box-shadow:0 2px 4px rgba(0,0,0,0.2);\">âœˆï¸ å‰å¾€ Google Flights é¢„è®¢</a>\n  </div>\n</div>\n```\n\n4. **é‚®ä»¶é¡µè„š**ï¼š\n- ä¸“ä¸šç»“æŸè¯­\n- è”ç³»ä¿¡æ¯\n- æ—…è¡Œæç¤ºæˆ–é¢„è®¢æé†’\n\n**è¾“å‡ºè¦æ±‚ï¼š**\n- ç›´æ¥è¾“å‡ºå®Œæ•´HTMLï¼Œä¸è¦ä»»ä½•```html```æ ‡è®°\n- ä¸è¦åŒ…å«---åˆ†éš”ç¬¦\n- ç¡®ä¿æ‰€æœ‰å†…å®¹å±…ä¸­å¯¹é½ï¼ˆé™¤äº†å¡ç‰‡å†…çš„è¯¦ç»†ä¿¡æ¯ï¼‰\n- ä½¿ç”¨ç»Ÿä¸€çš„å­—ä½“å’Œé¢œè‰²æ–¹æ¡ˆ"
            },
            {
              "content": "èˆªç­æ¨èæ ·å¼è§„èŒƒï¼š\n\n**æ•´ä½“å¸ƒå±€ï¼š**\n- æœ€å¤§å®½åº¦ï¼š600px\n- å±…ä¸­å¯¹é½ï¼šmargin: 0 auto\n- å†…è¾¹è·ï¼š20px\n- èƒŒæ™¯è‰²ï¼š#f8f9fa\n\n**å­—ä½“è§„èŒƒï¼š**\n- ä¸»å­—ä½“ï¼šArial, sans-serif\n- æ ‡é¢˜ï¼š24px, 18px\n- æ­£æ–‡ï¼š16px, 14px\n- è¡Œé«˜ï¼š1.6\n\n**é¢œè‰²æ–¹æ¡ˆï¼š**\n- ä¸»è‰²è°ƒï¼š#1e88e5ï¼ˆè“è‰²ï¼‰\n- æ–‡å­—ï¼š#333ï¼ˆæ·±ç°ï¼‰\n- æ¬¡è¦æ–‡å­—ï¼š#666ï¼ˆä¸­ç°ï¼‰\n- ä»·æ ¼èƒŒæ™¯ï¼š#fff3cdï¼ˆæµ…é»„ï¼‰\n\n**å¯¹é½è¦æ±‚ï¼š**\n- é‚®ä»¶æ ‡é¢˜ï¼šå±…ä¸­\n- é—®å€™è¯­ï¼šå±…ä¸­\n- è¡Œç¨‹ä¿¡æ¯ï¼šå±…ä¸­\n- èˆªç­å¡ç‰‡ï¼šå±…ä¸­\n- å¡ç‰‡å†…è¯¦ç»†ä¿¡æ¯ï¼šå·¦å¯¹é½\n- é¢„è®¢æŒ‰é’®ï¼šå±…ä¸­\n- é¡µè„šï¼šå±…ä¸­\n\n**åˆ†ææŒ‡å—ï¼š**\n- æƒè¡¡æ€»æ—…è¡Œæ—¶é—´ä¸ä»·æ ¼\n- è€ƒè™‘ç»åœä¾¿åˆ©æ€§ä¸æ—¶é•¿\n- å…³æ³¨èµ·é™æ—¶é—´åå¥½\n- è€ƒè™‘èˆªå¸å¯é æ€§ä¸å£ç¢‘\n- ç»¼åˆè¡Œææ”¿ç­–\n- è¯´æ˜ä¸ºä½•è¯¥èˆªç­ä¼˜äºæ›¿ä»£æ–¹æ¡ˆ\n- è€ƒè™‘æ—¶åŒºå·®å¼‚\n- è€ƒè™‘æœºåœºé€šè¾¾æ€§\n\n**é‡è¦æé†’ï¼š**\n- ä¸è¦ä½¿ç”¨Markdownæ ¼å¼\n- ä¸è¦åŒ…å«ä»£ç å—æ ‡è®°\n- ä¸è¦æ·»åŠ åˆ†éš”ç¬¦\n- ç¡®ä¿HTMLæ ¼å¼æ­£ç¡®\n- æ‰€æœ‰æ ·å¼ä½¿ç”¨å†…è”CSS"
            },
            {
              "content": "èˆªç­æ¨èè¾“å‡ºæ ¼å¼è¦æ±‚ï¼š\n\n**ä¸¥æ ¼éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š**\n\n1. **ç›´æ¥è¾“å‡ºHTML**ï¼šä¸è¦åŒ…å«```html```ã€```ã€---ç­‰ä»»ä½•æ ‡è®°\n2. **å®Œæ•´HTMLæ–‡æ¡£**ï¼šä»<!DOCTYPE html>å¼€å§‹ï¼Œåˆ°</html>ç»“æŸ\n3. **å†…å®¹å±…ä¸­**ï¼šé™¤äº†å¡ç‰‡å†…çš„è¯¦ç»†ä¿¡æ¯å¤–ï¼Œæ‰€æœ‰å†…å®¹éƒ½è¦å±…ä¸­å¯¹é½\n4. **ç»Ÿä¸€æ’ç‰ˆ**ï¼šä½¿ç”¨ä¸€è‡´çš„å­—ä½“å¤§å°ã€é¢œè‰²å’Œé—´è·\n5. **ç§»åŠ¨ç«¯å‹å¥½**ï¼šç¡®ä¿åœ¨æ‰‹æœºä¸Šä¹Ÿèƒ½æ­£å¸¸æ˜¾ç¤º\n\n**ç¦æ­¢åŒ…å«ï¼š**\n- Markdownä»£ç å—æ ‡è®°\n- åˆ†éš”ç¬¦ï¼ˆ---ï¼‰\n- å¤šä½™çš„HTMLæ ‡è®°\n- ä¸è§„èŒƒçš„ç¼©è¿›\n\n**å¿…é¡»åŒ…å«ï¼š**\n- å®Œæ•´çš„HTMLæ–‡æ¡£ç»“æ„\n- ä¸“ä¸šçš„é‚®ä»¶æ ·å¼\n- å±…ä¸­å¯¹é½çš„å¸ƒå±€\n- æ¸…æ™°çš„èˆªç­æ¨èä¿¡æ¯\n- å¯ç‚¹å‡»çš„é¢„è®¢é“¾æ¥\n- ä»·æ ¼ä¿¡æ¯çªå‡ºæ˜¾ç¤º\n\n**ç¤ºä¾‹è¾“å‡ºæ ¼å¼ï¼š**\nç›´æ¥ä»¥<!DOCTYPE html>å¼€å¤´ï¼Œä»¥</html>ç»“å°¾ï¼Œä¸­é—´åŒ…å«å®Œæ•´çš„é‚®ä»¶å†…å®¹ï¼Œä¸è¦ä»»ä½•é¢å¤–æ ‡è®°ã€‚"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        224,
        -160
      ],
      "id": "22925537-0469-4dcc-8319-d7336a09ef6d",
      "name": "å°† JSON æç‚¼ä¸ºèˆªç­æ¨èé‚®ä»¶",
      "credentials": {
        "googlePalmApi": {
          "id": "12KiryYsMrX43jr6",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "={{ $('On form submission').first().json[\"Email Address\"] }}",
        "subject": "Your Hotel Recommendation",
        "message": "={{ $json.content.parts[0].text }}",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        2736,
        176
      ],
      "id": "a6d71455-75fb-4b95-9ebd-69f276546cf2",
      "name": "Send hotel recommendation",
      "webhookId": "5852d21c-bf4d-4668-81be-f3959dc15ccd",
      "credentials": {
        "gmailOAuth2": {
          "id": "zq2VO4836Nm8fvsH",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "={{ $('On form submission').first().json[\"Email Address\"] }}",
        "subject": "Your Flight Recommendation",
        "message": "={{ $json.content.parts[0].text }}",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        576,
        -160
      ],
      "id": "ccaf46b8-e5b5-49d5-b369-f0ca6c1d39b3",
      "name": "Send Flight Recommendation",
      "webhookId": "5852d21c-bf4d-4668-81be-f3959dc15ccd",
      "credentials": {
        "gmailOAuth2": {
          "id": "zq2VO4836Nm8fvsH",
          "name": "Gmail account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "On form submission": {
      "main": [
        [
          {
            "node": "Extract form submission to JSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract form submission to JSON": {
      "main": [
        [
          {
            "node": "Parse JSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse JSON": {
      "main": [
        [
          {
            "node": "Google_flights search",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google_flights search": {
      "main": [
        [
          {
            "node": "å°† JSON æç‚¼ä¸ºèˆªç­æ¨èé‚®ä»¶",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å°† JSON æç‚¼ä¸ºèˆªç­æ¨èé‚®ä»¶": {
      "main": [
        [
          {
            "node": "Send Flight Recommendation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from scrape to email ready to send": {
      "main": [
        [
          {
            "node": "Send hotel recommendation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "6e56ea87-ba08-4355-a914-5bf087ba783c",
  "meta": {
    "instanceId": "8189043451cb6ebf84725e3e5c4c52a6b6f108808f9b746ade07cb907a172e3d"
  },
  "id": "1F8idACopoHaU9zk",
  "tags": []
}
